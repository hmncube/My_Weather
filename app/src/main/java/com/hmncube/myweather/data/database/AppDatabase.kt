package com.hmncube.myweather.data.database

import android.content.Context
import android.content.SharedPreferences
import android.util.Log
import com.google.gson.Gson
import javax.inject.Inject

class AppDatabase @Inject constructor(private val context: Context) {

    var database: SharedPreferences = context.getSharedPreferences("app_db",Context.MODE_PRIVATE)

    fun saveData(T : Any, key : String) {
        val editor = database.edit()
        val jsonString = Gson().toJson(T)
        Log.d("pundez", "saveData: $jsonString")
        Log.d("pundez", "saveData: $key")
        editor?.putString(key, jsonString)
        editor?.putString("key", "test")
        editor?.apply()
    }


    //"{"cod":"200","message":0,"cnt":40,"list":[{"dt":1670932800,"main":{"temp":24.12,"feels_like":23.81,"temp_min":24.12,"temp_max":24.12,"pressure":1012,"sea_level":1012,"grnd_level":855,"humidity":47,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"clouds":{"all":46},"wind":{"speed":4.88,"deg":52,"gust":6.1},"visibility":10000,"pop":0.12,"sys":{"pod":"d"},"dt_txt":"2022-12-13 12:00:00"},{"dt":1670943600,"main":{"temp":24.43,"feels_like":24.13,"temp_min":24.43,"temp_max":25.05,"pressure":1012,"sea_level":1012,"grnd_level":855,"humidity":46,"temp_kf":-0.62},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"clouds":{"all":49},"wind":{"speed":3.16,"deg":71,"gust":4.3},"visibility":10000,"pop":0.12,"sys":{"pod":"d"},"dt_txt":"2022-12-13 15:00:00"},{"dt":1670954400,"main":{"temp":21.49,"feels_like":21.29,"temp_min":20.17,"temp_max":21.49,"pressure":1013,"sea_level":1013,"grnd_level":855,"humidity":61,"temp_kf":1.32},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":57},"wind":{"speed":3.13,"deg":69,"gust":7.61},"visibility":10000,"pop":0.36,"rain":{"3h":0.41},"sys":{"pod":"n"},"dt_txt":"2022-12-13 18:00:00"},{"dt":1670965200,"main":{"temp":18.65,"feels_like":18.56,"temp_min":18.65,"temp_max":18.65,"pressure":1015,"sea_level":1015,"grnd_level":855,"humidity":76,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":65},"wind":{"speed":3.1,"deg":67,"gust":8.1},"visibility":10000,"pop":0.39,"rain":{"3h":0.15},"sys":{"pod":"n"},"dt_txt":"2022-12-13 21:00:00"},{"dt":1670976000,"main":{"temp":17.79,"feels_like":17.74,"temp_min":17.79,"temp_max":17.79,"pressure":1014,"sea_level":1014,"grnd_level":854,"humidity":81,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":61},"wind":{"speed":3.9,"deg":51,"gust":9.92},"visibility":10000,"pop":0.12,"sys":{"pod":"n"},"dt_txt":"2022-12-14 00:00:00"},{"dt":1670986800,"main":{"temp":16.68,"feels_like":16.73,"temp_min":16.68,"temp_max":16.68,"pressure":1015,"sea_level":1015,"grnd_level":854,"humidity":89,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":87},"wind":{"speed":2.52,"deg":61,"gust":6.3},"visibility":10000,"pop":0.21,"rain":{"3h":0.1},"sys":{"pod":"n"},"dt_txt":"2022-12-14 03:00:00"},{"dt":1670997600,"main":{"temp":21.13,"feels_like":21,"temp_min":21.13,"temp_max":21.13,"pressure":1016,"sea_level":1016,"grnd_level":857,"humidity":65,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":67},"wind":{"speed":3.94,"deg":55,"gust":6.01},"visibility":10000,"pop":0.21,"rain":{"3h":0.15},"sys":{"pod":"d"},"dt_txt":"2022-12-14 06:00:00"},{"dt":1671008400,"main":{"temp":26.34,"feels_like":26.34,"temp_min":26.34,"temp_max":26.34,"pressure":1013,"sea_level":1013,"grnd_level":857,"humidity":43,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":19},"wind":{"speed":2.96,"deg":63,"gust":2.34},"visibility":10000,"pop":0.34,"rain":{"3h":0.2},"sys":{"pod":"d"},"dt_txt":"2022-12-14 09:00:00"},{"dt":1671019200,"main":{"temp":26.01,"feels_like":26.01,"temp_min":26.01,"temp_max":26.01,"pressure":1010,"sea_level":1010,"grnd_level":854,"humidity":43,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"clouds":{"all":39},"wind":{"speed":1.86,"deg":33,"gust":3.33},"visibility":10000,"pop":0.22,"sys":{"pod":"d"},"dt_txt":"2022-12-14 12:00:00"},{"dt":1671030000,"main":{"temp":23.23,"feels_like":23.07,"temp_min":23.23,"temp_max":23.23,"pressure":1010,"sea_level":1010,"grnd_level":853,"humidity":56,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":74},"wind":{"speed":3.61,"deg":346,"gust":4.33},"visibility":10000,"pop":0.32,"rain":{"3h":0.22},"sys":{"pod":"d"},"dt_txt":"2022-12-14 15:00:00"},{"dt":1671040800,"main":{"temp":19.74,"feels_like":19.62,"temp_min":19.74,"temp_max":19.74,"pressure":1012,"sea_level":1012,"grnd_level":853,"humidity":71,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":56},"wind":{"speed":2.16,"deg":57,"gust":4.14},"visibility":10000,"pop":0.2,"sys":{"pod":"n"},"dt_txt":"2022-12-14 18:00:00"},{"dt":1671051600,"main":{"temp":18.59,"feels_like":18.52,"temp_min":18.59,"temp_max":18.59,"pressure":1013,"sea_level":1013,"grnd_level":854,"humidity":77,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":63},"wind":{"speed":2.35,"deg":59,"gust":4.73},"visibility":10000,"pop":0.25,"rain":{"3h":0.14},"sys":{"pod":"n"},"dt_txt":"2022-12-14 21:00:00"},{"dt":1671062400,"main":{"temp":17.56,"feels_like":17.43,"temp_min":17.56,"temp_max":17.56,"pressure":1012,"sea_level":1012,"grnd_level":852,"humidity":79,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":78},"wind":{"speed":1.74,"deg":33,"gust":2.8},"visibility":10000,"pop":0.3,"sys":{"pod":"n"},"dt_txt":"2022-12-15 00:00:00"},{"dt":1671073200,"main":{"temp":16.85,"feels_like":16.76,"temp_min":16.85,"temp_max":16.85,"pressure":1013,"sea_level":1013,"grnd_level":852,"humidity":83,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":54},"wind":{"speed":1.92,"deg":47,"gust":3.31},"visibility":10000,"pop":0.37,"sys":{"pod":"n"},"dt_txt":"2022-12-15 03:00:00"},{"dt":1671084000,"main":{"temp":21.99,"feels_like":21.84,"temp_min":21.99,"temp_max":21.99,"pressure":1013,"sea_level":1013,"grnd_level":855,"humidity":61,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":65},"wind":{"speed":2.11,"deg":32,"gust":2.84},"visibility":10000,"pop":0.69,"rain":{"3h":0.36},"sys":{"pod":"d"},"dt_txt":"2022-12-15 06:00:00"},{"dt":1671094800,"main":{"temp":25.82,"feels_like":25.71,"temp_min":25.82,"temp_max":25.82,"pressure":1011,"sea_level":1011,"grnd_level":855,"humidity":48,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":75},"wind":{"speed":2.24,"deg":354,"gust":1.7},"visibility":10000,"pop":0.89,"rain":{"3h":2.26},"sys":{"pod":"d"},"dt_txt":"2022-12-15 09:00:00"},{"dt":1671105600,"main":{"temp":22.45,"feels_like":22.4,"temp_min":22.45,"temp_max":22.45,"pressure":1009,"sea_level":1009,"grnd_level":852,"humidity":63,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":72},"wind":{"speed":2.55,"deg":166,"gust":3.97},"visibility":10000,"pop":0.93,"rain":{"3h":1.84},"sys":{"pod":"d"},"dt_txt":"2022-12-15 12:00:00"},{"dt":1671116400,"main":{"temp":17.93,"feels_like":17.82,"temp_min":17.93,"temp_max":17.93,"pressure":1010,"sea_level":1010,"grnd_level":851,"humidity":78,"temp_kf":0},"weather":[{"id":501,"main":"Rain","description":"moderate rain","icon":"10d"}],"clouds":{"all":99},"wind":{"speed":1.93,"deg":279,"gust":3.31},"visibility":10000,"pop":0.94,"rain":{"3h":3.09},"sys":{"pod":"d"},"dt_txt":"2022-12-15 15:00:00"},{"dt":1671127200,"main":{"temp":17.16,"feels_like":17.1,"temp_min":17.16,"temp_max":17.16,"pressure":1012,"sea_level":1012,"grnd_level":852,"humidity":83,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":100},"wind":{"speed":0.34,"deg":277,"gust":0.8},"visibility":10000,"pop":1,"rain":{"3h":1.11},"sys":{"pod":"n"},"dt_txt":"2022-12-15 18:00:00"},{"dt":1671138000,"main":{"temp":17.8,"feels_like":17.8,"temp_min":17.8,"temp_max":17.8,"pressure":1012,"sea_level":1012,"grnd_level":852,"humidity":83,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":1.23,"deg":70,"gust":1.88},"visibility":10000,"pop":0.26,"sys":{"pod":"n"},"dt_txt":"2022-12-15 21:00:00"},{"dt":1671148800,"main":{"temp":16.38,"feels_like":16.4,"temp_min":16.38,"temp_max":16.38,"pressure":1011,"sea_level":1011,"grnd_level":851,"humidity":89,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":100},"wind":{"speed":0.9,"deg":347,"gust":1.18},"visibility":10000,"pop":0.5,"rain":{"3h":0.12},"sys":{"pod":"n"},"dt_txt":"2022-12-16 00:00:00"},{"dt":1671159600,"main":{"temp":16.45,"feels_like":16.55,"temp_min":16.45,"temp_max":16.45,"pressure":1012,"sea_level":1012,"grnd_level":852,"humidity":92,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":100},"wind":{"speed":1.71,"deg":32,"gust":3.13},"visibility":10000,"pop":0.55,"rain":{"3h":0.4},"sys":{"pod":"n"},"dt_txt":"2022-12-16 03:00:00"},{"dt":1671170400,"main":{"temp":17.78,"feels_like":17.81,"temp_min":17.78,"temp_max":17.78,"pressure":1013,"sea_level":1013,"grnd_level":853,"humidity":84,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":100},"wind":{"speed":1.45,"deg":9,"gust":2.42},"visibility":10000,"pop":0.52,"rain":{"3h":0.33},"sys":{"pod":"d"},"dt_txt":"2022-12-16 06:00:00"},{"dt":1671181200,"main":{"temp":23.99,"feels_like":23.88,"temp_min":23.99,"temp_max":23.99,"pressure":1011,"sea_level":1011,"grnd_level":854,"humidity":55,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":0.85,"deg":315,"gust":1.16},"visibility":10000,"pop":0.16,"sys":{"pod":"d"},"dt_txt":"2022-12-16 09:00:00"},{"dt":1671192000,"main":{"temp":26.16,"feels_like":26.16,"temp_min":26.16,"temp_max":26.16,"pressure":1007,"sea_level":1007,"grnd_level":852,"humidity":45,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":100},"wind":{"speed":1.32,"deg":247,"gust":1.69},"visibility":10000,"pop":0.3,"rain":{"3h":0.18},"sys":{"pod":"d"},"dt_txt":"2022-12-16 12:00:00"},{"dt":1671202800,"main":{"temp":21.85,"feels_like":21.87,"temp_min":21.85,"temp_max":21.85,"pressure":1007,"sea_level":1007,"grnd_level":850,"humidity":68,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":100},"wind":{"speed":1.48,"deg":31,"gust":1.86},"visibility":10000,"pop":0.61,"rain":{"3h":1.4},"sys":{"pod":"d"},"dt_txt":"2022-12-16 15:00:00"},{"dt":1671213600,"main":{"temp":19.38,"feels_like":19.49,"temp_min":19.38,"temp_max":19.38,"pressure":1009,"sea_level":1009,"grnd_level":851,"humidity":81,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":98},"wind":{"speed":1.65,"deg":357,"gust":2.54},"visibility":10000,"pop":0.93,"rain":{"3h":1.24},"sys":{"pod":"n"},"dt_txt":"2022-12-16 18:00:00"},{"dt":1671224400,"main":{"temp":18.04,"feels_like":18.2,"temp_min":18.04,"temp_max":18.04,"pressure":1011,"sea_level":1011,"grnd_level":851,"humidity":88,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":100},"wind":{"speed":1.84,"deg":288,"gust":3.46},"visibility":10000,"pop":0.91,"rain":{"3h":1.06},"sys":{"pod":"n"},"dt_txt":"2022-12-16 21:00:00"},{"dt":1671235200,"main":{"temp":17.4,"feels_like":17.55,"temp_min":17.4,"temp_max":17.4,"pressure":1009,"sea_level":1009,"grnd_level":849,"humidity":90,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":100},"wind":{"speed":1.54,"deg":289,"gust":2.41},"visibility":10000,"pop":0.85,"rain":{"3h":1.41},"sys":{"pod":"n"},"dt_txt":"2022-12-17 00:00:00"},{"dt":1671246000,"main":{"temp":16.66,"feels_like":16.78,"temp_min":16.66,"temp_max":16.66,"pressure":1010,"sea_level":1010,"grnd_level":850,"humidity":92,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":1.48,"deg":302,"gust":2.19},"visibility":10000,"pop":0.4,"sys":{"pod":"n"},"dt_txt":"2022-12-17 03:00:00"},{"dt":1671256800,"main":{"temp":20.99,"feels_like":21.02,"temp_min":20.99,"temp_max":20.99,"pressure":1010,"sea_level":1010,"grnd_level":852,"humidity":72,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":100},"wind":{"speed":2.03,"deg":314,"gust":3.48},"visibility":8833,"pop":0.9,"rain":{"3h":1.03},"sys":{"pod":"d"},"dt_txt":"2022-12-17 06:00:00"},{"dt":1671267600,"main":{"temp":25.04,"feels_like":24.98,"temp_min":25.04,"temp_max":25.04,"pressure":1008,"sea_level":1008,"grnd_level":852,"humidity":53,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":99},"wind":{"speed":3.76,"deg":314,"gust":4.57},"visibility":10000,"pop":1,"rain":{"3h":0.9},"sys":{"pod":"d"},"dt_txt":"2022-12-17 09:00:00"},{"dt":1671278400,"main":{"temp":23.67,"feels_like":23.66,"temp_min":23.67,"temp_max":23.67,"pressure":1006,"sea_level":1006,"grnd_level":850,"humidity":60,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":99},"wind":{"speed":3.54,"deg":325,"gust":5.28},"visibility":10000,"pop":1,"rain":{"3h":1.57},"sys":{"pod":"d"},"dt_txt":"2022-12-17 12:00:00"},{"dt":1671289200,"main":{"temp":21.98,"feels_like":22.04,"temp_min":21.98,"temp_max":21.98,"pressure":1005,"sea_level":1005,"grnd_level":848,"humidity":69,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":100},"wind":{"speed":1.85,"deg":333,"gust":5.29},"visibility":10000,"pop":0.8,"rain":{"3h":1.01},"sys":{"pod":"d"},"dt_txt":"2022-12-17 15:00:00"},{"dt":1671300000,"main":{"temp":19.57,"feels_like":19.65,"temp_min":19.57,"temp_max":19.57,"pressure":1007,"sea_level":1007,"grnd_level":849,"humidity":79,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":100},"wind":{"speed":1.17,"deg":286,"gust":1.47},"visibility":10000,"pop":0.74,"rain":{"3h":0.75},"sys":{"pod":"n"},"dt_txt":"2022-12-17 18:00:00"},{"dt":1671310800,"main":{"temp":18.4,"feels_like":18.52,"temp_min":18.4,"temp_max":18.4,"pressure":1008,"sea_level":1008,"grnd_level":849,"humidity":85,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":98},"wind":{"speed":1.3,"deg":274,"gust":1.48},"visibility":10000,"pop":0.69,"rain":{"3h":1.04},"sys":{"pod":"n"},"dt_txt":"2022-12-17 21:00:00"},{"dt":1671321600,"main":{"temp":17.61,"feels_like":17.72,"temp_min":17.61,"temp_max":17.61,"pressure":1007,"sea_level":1007,"grnd_level":848,"humidity":88,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":99},"wind":{"speed":1.31,"deg":307,"gust":1.47},"visibility":10000,"pop":0.6,"sys":{"pod":"n"},"dt_txt":"2022-12-18 00:00:00"},{"dt":1671332400,"main":{"temp":17.12,"feels_like":17.16,"temp_min":17.12,"temp_max":17.12,"pressure":1008,"sea_level":1008,"grnd_level":849,"humidity":87,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":1.46,"deg":300,"gust":1.77},"visibility":10000,"pop":0.18,"sys":{"pod":"n"},"dt_txt":"2022-12-18 03:00:00"},{"dt":1671343200,"main":{"temp":21.32,"feels_like":21.31,"temp_min":21.32,"temp_max":21.32,"pressure":1009,"sea_level":1009,"grnd_level":851,"humidity":69,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":2.46,"deg":303,"gust":4.32},"visibility":10000,"pop":0.29,"sys":{"pod":"d"},"dt_txt":"2022-12-18 06:00:00"},{"dt":1671354000,"main":{"temp":24.63,"feels_like":24.61,"temp_min":24.63,"temp_max":24.63,"pressure":1008,"sea_level":1008,"grnd_level":852,"humidity":56,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":93},"wind":{"speed":3.81,"deg":319,"gust":4.89},"visibility":10000,"pop":0.97,"rain":{"3h":2.33},"sys":{"pod":"d"},"dt_txt":"2022-12-18 09:00:00"}],"city":{"id":890299,"name":"Harare","coord":{"lat":-17.83,"lon":31.05},"country":"ZW","population":1542813,"timezone":7200,"sunrise":1670901272,"sunset":1670948724}}"

    fun deleteData(key : String) {
        val editor = database.edit()
        editor?.remove(key)
        editor?.apply()
    }

    fun readData(key : String) : String? {
        return database.getString(key, "")
    }

    /*companion object {
        private var INSTANCE : SharedPreferences? = null
        fun getDatabase(context: Context) : SharedPreferences {
            if (INSTANCE == null) {
                synchronized(this) {
                    INSTANCE = context.getSharedPreferences("app_db",Context.MODE_PRIVATE)
                }
            }
            return INSTANCE!!
        }

    }*/
}